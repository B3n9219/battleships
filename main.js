(()=>{"use strict";var r={56:(r,t,e)=>{r.exports=function(r){var t=e.nc;t&&r.setAttribute("nonce",t)}},72:r=>{var t=[];function e(r){for(var e=-1,o=0;o<t.length;o++)if(t[o].identifier===r){e=o;break}return e}function o(r,o){for(var s={},i=[],a=0;a<r.length;a++){var d=r[a],c=o.base?d[0]+o.base:d[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var u=e(h),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var f=n(p,o);o.byIndex=a,t.splice(a,0,{identifier:h,updater:f,references:1})}i.push(h)}return i}function n(r,t){var e=t.domAPI(t);return e.update(r),function(t){if(t){if(t.css===r.css&&t.media===r.media&&t.sourceMap===r.sourceMap&&t.supports===r.supports&&t.layer===r.layer)return;e.update(r=t)}else e.remove()}}r.exports=function(r,n){var s=o(r=r||[],n=n||{});return function(r){r=r||[];for(var i=0;i<s.length;i++){var a=e(s[i]);t[a].references--}for(var d=o(r,n),c=0;c<s.length;c++){var l=e(s[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=d}}},113:r=>{r.exports=function(r,t){if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}},314:r=>{r.exports=function(r){var t=[];return t.toString=function(){return this.map(function(t){var e="",o=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),o&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=r(t),o&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},t.i=function(r,e,o,n,s){"string"==typeof r&&(r=[[null,r,void 0]]);var i={};if(o)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(i[d]=!0)}for(var c=0;c<r.length;c++){var l=[].concat(r[c]);o&&i[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),t.push(l))}},t}},354:r=>{r.exports=function(r){var t=r[1],e=r[3];if(!e)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),s="/*# ".concat(n," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},365:(r,t,e)=>{e.d(t,{A:()=>a});var o=e(354),n=e.n(o),s=e(314),i=e.n(s)()(n());i.push([r.id,":root {\n    font-family: Roboto, serif;\n}\n\n* {\n    box-sizing: border-box;\n}\n\n.game {\n    display: flex;\n    gap: 4rem;\n}\n\n.gameboard {\n    display: grid;\n    width: 500px;\n    height: 500px;\n    grid-template-rows: repeat(10, 1fr);\n    grid-template-columns: repeat(10, 1fr);\n    border: 2px solid black;\n}\n\n.cell {\n    border: 1px solid black;\n}\n\n.empty, .ship.enemy {\n    background-color: dodgerblue;\n}\n\n.ship:not(.enemy) {\n    background-color: darkgrey;\n}\n\n.ship.hit {\n    background-color: red;\n}\n\n.empty.miss {\n    background-color: white;\n}","",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA;IACI,0BAA0B;AAC9B;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,SAAS;AACb;;AAEA;IACI,aAAa;IACb,YAAY;IACZ,aAAa;IACb,mCAAmC;IACnC,sCAAsC;IACtC,uBAAuB;AAC3B;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,4BAA4B;AAChC;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,uBAAuB;AAC3B",sourcesContent:[":root {\r\n    font-family: Roboto, serif;\r\n}\r\n\r\n* {\r\n    box-sizing: border-box;\r\n}\r\n\r\n.game {\r\n    display: flex;\r\n    gap: 4rem;\r\n}\r\n\r\n.gameboard {\r\n    display: grid;\r\n    width: 500px;\r\n    height: 500px;\r\n    grid-template-rows: repeat(10, 1fr);\r\n    grid-template-columns: repeat(10, 1fr);\r\n    border: 2px solid black;\r\n}\r\n\r\n.cell {\r\n    border: 1px solid black;\r\n}\r\n\r\n.empty, .ship.enemy {\r\n    background-color: dodgerblue;\r\n}\r\n\r\n.ship:not(.enemy) {\r\n    background-color: darkgrey;\r\n}\r\n\r\n.ship.hit {\r\n    background-color: red;\r\n}\r\n\r\n.empty.miss {\r\n    background-color: white;\r\n}"],sourceRoot:""}]);const a=i},540:r=>{r.exports=function(r){var t=document.createElement("style");return r.setAttributes(t,r.attributes),r.insert(t,r.options),t}},659:r=>{var t={};r.exports=function(r,e){var o=function(r){if(void 0===t[r]){var e=document.querySelector(r);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(r){e=null}t[r]=e}return t[r]}(r);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},825:r=>{r.exports=function(r){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=r.insertStyleElement(r);return{update:function(e){!function(r,t,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var n=void 0!==e.layer;n&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,n&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var s=e.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,r,t.options)}(t,r,e)},remove:function(){!function(r){if(null===r.parentNode)return!1;r.parentNode.removeChild(r)}(t)}}}}},t={};function e(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={id:o,exports:{}};return r[o](s,s.exports,e),s.exports}e.n=r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},e.d=(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),e.nc=void 0;var o=e(72),n=e.n(o),s=e(825),i=e.n(s),a=e(659),d=e.n(a),c=e(56),l=e.n(c),h=e(540),u=e.n(h),p=e(113),f=e.n(p),m=e(365),y={};y.styleTagTransform=f(),y.setAttributes=l(),y.insert=d().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=u(),n()(m.A,y),m.A&&m.A.locals&&m.A.locals;class A{constructor(r,t,e,o){this.container=r,this.gameboard1=t,this.gameboard2=e,this.playRound=o,this.renderedGameboards=[]}renderDisplay(){this.renderedGameboards.push(this.container.appendChild(this.renderGameboard(this.gameboard1))),this.renderedGameboards.push(this.container.appendChild(this.renderGameboard(this.gameboard2)));const r=this.renderedGameboards[1].querySelectorAll(".cell");for(let t of r)t.classList.add("enemy"),t.addEventListener("click",()=>{this.playRound({x:Number(t.dataset.x),y:Number(t.dataset.y)})});document.createElement("button")}renderGameboard(r){const t=document.createElement("div");t.classList.add("gameboard");for(let e=r.size-1;e>=0;e--)for(let o=0;o<r.size;o++){const n=document.createElement("div");n.dataset.x=String(o),n.dataset.y=String(e),n.classList.add("cell");const s=r.shipAtCord({x:o,y:e});if(s){n.classList.add("ship");for(let r of s.hitCords)s.isCordHit({x:o,y:e})&&n.classList.add("hit")}else n.classList.add("empty"),r.isCordMiss({x:o,y:e})&&n.classList.add("miss");t.appendChild(n)}return t}updateDisplay(){this.container.innerHTML="",this.renderedGameboards=[],this.renderDisplay()}}class C{constructor(r){this.length=r,this.cords=null,this.hitCords=[]}hit(r){for(let t of this.hitCords)if(r.x===t.x&&r.y===t.y)throw new Error("Ship has already been hit at this cord");this.hitCords.push(r)}sortHitCords(){let r;r=this.hitCords[0].x===this.hitCords[1].x?"y":"x",this.hitCords.sort((t,e)=>t[r]-e[r])}isSunk(){return this.hitCount>=this.length}place(r){this.cords=r}get hitCount(){return this.hitCords.length}isCordHit(r){for(let t of this.hitCords)if(r.x===t.x&&r.y===t.y)return!0;return!1}}class b{constructor(r=10){this.size=r,this.ships=[],this.missedAttacks=[]}placeShip(r){if(r.length<2)throw new Error("Ship must be at least 2 long");if(!this.cordsValid(r))throw new Error("Ship cords are not valid");if(!this.cordsFree(r))throw new Error("Trying to place new ship in occupied area");const t=new C(r.length);t.place(r),this.ships.push(t)}cordsValid(r){let t,e;r[0].x!==r[1].x?(t="x",e="y"):(t="y",e="x");for(let o=1;o<r.length;o++){if(1!==Math.abs(r[o][t]-r[o-1][t]))return!1;if(r[o-1][e]!==r[o][e])return!1}return!0}cordsFree(r){for(let t of r){if(!this.cordOnBoard(t))return!1;for(let r of this.ships)for(let e of r.cords)if(t.x===e.x&&t.y===e.y)return!1}return!0}cordOnBoard(r){return r.x>=0&&r.x<this.size&&r.y>=0&&r.y<this.size}recieveAttack(r){for(let t of this.ships)for(let e of t.cords)if(e.x===r.x&&e.y===r.y&&!t.isCordHit(r))return void t.hit(r);if(!this.cordOnBoard(r))throw new Error("Attack cord is not on the board (too big or small)");this.missedAttacks.push(r)}allShipsSunk(){for(let r of this.ships)if(!r.isSunk())return!1;return!0}shipAtCord(r){for(let t of this.ships)for(let e of t.cords)if(r.x===e.x&&r.y===e.y)return t;return null}isCordMiss(r){for(let t of this.missedAttacks)if(r.x===t.x&&r.y===t.y)return!0;return!1}isCordNew(r){if(this.isCordMiss(r))return!1;const t=this.shipAtCord(r);return!t||!t.isCordHit(r)}placeShips(){const r=[2,3,3,4,5];for(let t of r){let r,e;r=Math.random()<=.5?"x":"y",e=Math.random()<=.5?1:-1;let o=!1,n=[];for(;!o;){let s=[],i={x:Math.floor(Math.random()*this.size),y:Math.floor(Math.random()*this.size)};for(let o=0;o<t;o++){let t={x:i.x,y:i.y};t[r]+=o*e,s.push(t)}this.cordsValid(s)&&this.cordsFree(s)&&(n=s,o=!0)}this.placeShip(n)}}}class g{constructor(r){this.gameboard=r}}class x extends g{constructor(r){super(r)}chooseCord(r){let t=this.chooseSmartCord(r);return t||(t=this.chooseRandomCord(r)),t}chooseSmartCord(r){let t;const e=[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:0,y:1}];for(let o of r.ships)if(o.hitCords.length<o.length)if(1===o.hitCords.length){const n=o.hitCords[0];for(let o=0;o<e.length;o++)if(t={x:n.x+e[o].x,y:n.y+e[o].y},r.isCordNew(t)&&r.cordOnBoard(t))return t}else if(o.hitCords.length>1){o.sortHitCords();const e=o.hitCords.length-1,n=o.hitCords[e].x-o.hitCords[e-1].x,s=o.hitCords[e].y-o.hitCords[e-1].y;if(t={x:o.hitCords[e].x+n,y:o.hitCords[e].y+s},r.isCordNew(t)&&r.cordOnBoard(t))return t;if(t={x:o.hitCords[0].x-n,y:o.hitCords[0].y-s},r.isCordNew(t)&&r.cordOnBoard(t))return t}return null}chooseRandomCord(r){let t,e=!1;for(;!e;)t={x:Math.floor(Math.random()*r.size),y:Math.floor(Math.random()*r.size)},r.isCordNew(t)&&(e=!0);return console.log("ROBO CORD"),t}}class v{constructor(){this.gameContainer=document.querySelector(".game"),this.player=new g(new b),this.robot=new x(new b),this.playRound=this.playRound.bind(this),this.displayManager=new A(this.gameContainer,this.player.gameboard,this.robot.gameboard,this.playRound)}start(){this.player.gameboard.placeShips(),this.robot.gameboard.placeShips(),this.displayManager.updateDisplay()}playRound(r){console.log(r),this.robot.gameboard.isCordNew(r)&&(this.robot.gameboard.recieveAttack(r),this.player.gameboard.recieveAttack(this.robot.chooseCord(this.player.gameboard)),this.displayManager.updateDisplay(),this.robot.gameboard.allShipsSunk()?alert("Player WINS"):this.player.gameboard.allShipsSunk()&&alert("Robot Wins"))}}let w=new v;w.start(),document.querySelector(".reset").addEventListener("click",()=>{w=new v,w.start()})})();
//# sourceMappingURL=main.js.map